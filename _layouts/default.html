<!DOCTYPE html>
<html lang="{{ site.lang | default: "zh-CN" }}">

{% include head.html %}

<!-- Google Analytics -->
<script>
    (function() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-CZXSW9B3FH';
        document.head.appendChild(script);
        
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-CZXSW9B3FH');
    })();
</script>

<!-- iOS风格全局基础样式 -->
<style type="text/css">
    :root {
        --ios-gray-50: #f9fafb;
        --ios-gray-100: #f3f4f6;
        --ios-gray-200: #e5e7eb;
        --ios-gray-300: #d1d5db;
        --ios-gray-700: #374151;
        --ios-gray-800: #1f2937;
        --ios-blue: #007aff;
        --ios-shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
        --ios-shadow-hover: 0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06);
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: var(--ios-gray-50);
        color: var(--ios-gray-800);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
    }
    
    .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
    }
    
    a {
        color: var(--ios-blue);
        text-decoration: none;
        transition: color 0.2s ease;
    }
    
    a:hover {
        color: #0066cc;
    }
    
    /* 回到顶部按钮 */
    #back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: var(--ios-blue);
        color: white;
        border: none;
        border-radius: 50%;
        width: 44px;
        height: 44px;
        font-size: 20px;
        cursor: pointer;
        box-shadow: var(--ios-shadow);
        display: none;
        z-index: 1000;
    }
    
    #back-to-top:hover {
        background: #0066cc;
    }
</style>

<body ontouchstart="">
    {% include nav.html %}

    <main class="main-content" role="main">
        {{ content }}
    </main>

    {% include footer.html %}

    <!-- Wechat hack image -->
    <img src="{{ site.baseurl }}/img/apple-touch-icon.png" width="0" height="0" style="display: none;" />
    
    <!-- 回到顶部功能 -->
    <button id="back-to-top">↑</button>
    <script>
        const backToTopButton = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', () => {
            backToTopButton.style.display = window.scrollY > 300 ? 'block' : 'none';
        });
        
        backToTopButton.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>
