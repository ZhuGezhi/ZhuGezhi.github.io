<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">

{% include head.html %}

<!-- Google tag (gtag.js) - 优化加载顺序 -->
<script>
    // 异步加载Google Analytics，不阻塞渲染
    (function() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-CZXSW9B3FH';
        document.head.appendChild(script);
        
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-CZXSW9B3FH');
    })();
</script>

<!-- iOS风格全局样式基础 -->
<style type="text/css">
    /* 基础重置 */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    /* iOS风格body基础设置 */
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: #f9fafb; /* var(--ios-gray-50) */
        color: #1f2937; /* var(--ios-gray-800) */
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    /* 容器样式统一 */
    .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 15px;
    }
    
    /* 链接基础样式 */
    a {
        color: #007aff; /* var(--ios-blue) */
        text-decoration: none;
        transition: color 0.2s ease;
    }
    
    a:hover {
        color: #0066cc;
    }
    
    /* 清除浮动 */
    .clearfix::after {
        content: "";
        display: table;
        clear: both;
    }
</style>

<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="bg-gray-50">

    {% include nav.html %}

    <!-- 主内容区容器 -->
    <main class="main-content" role="main">
        {{ content }}
    </main>

    {% include footer.html %}

    <!-- Image to hack wechat -->
    <img src="{{ site.baseurl }}/img/apple-touch-icon.png" width="0" height="0" style="display: none;" />
    
    <!-- 回到顶部按钮（可选增强） -->
    <button id="back-to-top" style="position: fixed; bottom: 30px; right: 30px; background: #007aff; color: white; border: none; border-radius: 50%; width: 44px; height: 44px; font-size: 20px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: none; z-index: 1000;">↑</button>
    
    <script>
        // 回到顶部功能
        const backToTopButton = document.getElementById('back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        });
        
        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // 平滑滚动支持
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>

</body>
</html>
